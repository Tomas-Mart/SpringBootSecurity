<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .navbar-dark {
            background-color: #000 !important;
            padding: 10px 20px;
        }

        .sidebar {
            background-color: #007bff;
            min-height: 100vh;
            width: 200px;
            padding: 20px;
            color: white;
        }

        .sidebar .nav-link {
            background-color: rgba(255, 255, 255, 0.2);
            color: white !important;
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
<!-- Верхняя черная панель -->
<nav class="navbar navbar-dark">
    <div class="container-fluid">
        <div class="d-flex align-items-center">
                <span class="text-white me-3"
                      th:text="${user.email} + ' with roles: ' + ${#strings.listJoin(user.roles.![name.replace('ROLE_','')], ' ')}"></span>
        </div>
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="btn btn-outline-light">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </form>
    </div>
</nav>

<div class="d-flex">
    <!-- Голубая боковая панель -->
    <div class="sidebar">
        <ul class="nav flex-column">
            <!-- Ссылка на админку (только если есть роль ADMIN) -->
            <li class="nav-item" th:if="${#lists.contains(user.roles.![name], 'ROLE_ADMIN')}">
                <a href="/admin" class="nav-link">
                    <i class="fas fa-table me-2"></i>Admin
                </a>
            </li>

            <!-- Ссылка на личную страницу (всегда активна) -->
            <li class="nav-item">
                <a href="/user/profile" class="nav-link active">
                    <i class="fas fa-user me-2"></i>User
                </a>
            </li>
        </ul>
    </div>

    <!-- Основной контент -->
    <div class="col-md-9 p-4">
        <h3>User information-page</h3>
        <h4 class="mt-4">About user</h4>

        <table class="table table-bordered mt-3">
            <thead class="table-light">
            <tr>
                <th>ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Age</th>
                <th>Email</th>
                <th>Role</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td th:text="${user.id}"></td>
                <td th:text="${user.firstName}"></td>
                <td th:text="${user.lastName}"></td>
                <td th:text="${user.age}"></td>
                <td th:text="${user.email}"></td>
                <td th:text="${#strings.arrayJoin(user.roles.![name.replace('ROLE_','')], ' ')}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>